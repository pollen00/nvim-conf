Specific to my setup but there's some stuff you can probably steal. If something is broken feel free to make an issue.
